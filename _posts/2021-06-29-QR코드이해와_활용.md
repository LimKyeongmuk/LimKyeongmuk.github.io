---
title: "QR 코드 이해와 활용"
excerpt: ""

categories:
  - QR 코드
tags:
  - QR 코드
---
### QR 코드 소개
- 자율주행 자동차와 QR 코드
  - 교통 표지판 역할
  - 유용한 정보의 전달 방법

- 로봇과 QR 코드
  - 경로 안내
  - 주변 상황 인지
  
  - 로봇의 상황 인지에 도움을 주는 것
    - Magnetic Guide
    - QR Code
    - Laser SLAM
    - Camera(로봇 또는 관제 시스템)

- QR 코드
  - QR code(Quick Response code)
  - 정보를 담고 있는 2차원 그래픽 이미지
  
- QR 코드에 담긴 데이터
  - 숫자 최대 7,089자
  - 문자 최대 4,296자
  - 한자 최대 1,817자
  
- QR 코드 vs 바코드
  - 바코드
    - 일상 생활에서 많이 접히는 정보저장 이미지
    - 1차원으로 20여자의 숫자 정보 저장 가능
  
- QR 코드 개요
  - 2차원의 이미지 패턴으로 정보를 나타내는 코드
  - 숫자 최대 7,089자, 문자 최대 4,296자, 한자 최대 1,817자 가능
  - 개발자인 덴소웨이브가 특허권을 행사하지 않기 때문에 무료로 이용 가능
  - 정사각형 형태로 기울어져 있어도 상관 없음
  
- QR 코드 특징
  - 작은 공간 인쇄 가능
    - 바코드와 동일한 정보량을 1/10 크기로 표시 가능  
  - 어느 방향에서도 인식 가능
    - QR 코드 안에 3개의 '위치 검출 패턴' 들어있음
    - A, B, C(가로, 세로, 대각선) 어느 방향에서도 백색과 흑색 셀의 비율이 반드시 1:1:3:1:1
    - 따라서 360도 모든 방향에서 고속 인식과 판독이 가능  
  - 오염과 손상에 강함
    - 오류 복원 기능이 있음
    - 최대 30% 복원 가능
    - QR 코드에 디자인 삽입 가능  
  - 연속 기능 제공
    - 하나의 데이터를 분할해서 여러 개의 QR 코드로 표시 가능
    - 최대 16개로 분할 가능(좁고 긴 띠 모양으로 표시 가능)
  
- QR 코드의 규격
  - QR 코드를 구성하는 최소 단위를 셀이라고 함(흑백의 정사각형)
  - QR 코드는 셀의 조합으로 표시
  - 최소 심벌 크기: 21x21 셀
  - 최대 심벌 크기: 177x177 셀
  
- QR 코드 2가지 모델
  - 모델 1
    - 최초로 제작된 QR 코드  
  - 모델 2
    - 위치 조정을 개선하도록 얼리인먼트 패턴이 추가됨
    - 모델 1보다 많은 데이터를 수용
  
- QR 코드 구조(QR 코드의 6대 구성 요소와 의미)
  - 경계: 다른 이미지와 구분하게 해주는 공간
  - 파인더: QR 코드임을 알 수 있게 해주는 세 개의 정사각형, 코드의 방향을 잡아줌
  - 얼리인먼트: 코드 스캔 방향을 알려주는 정사각형, 파인더에서의 정사각형보다 작음. 코드가 약간 훼손됐을때에도 이 요소 덕분에 정보를 읽어낼 수 있음
  - 타이밍 패턴: 코드 내 정보가 담긴 개별 위치를 인지하기 좋게 해줌
  - 버전 정보: 해당 QR 코드의 버전을 나타냄
  - 개별 단위: 앞서 언급한 5개의 요소를 제외한 희고 검고 작은 사각형들, 각각이 데이터를 담은 단위(cell) 역할
  
- QR 코드의 규격
  - 경계(마진)
    - QR 코드 주위의 공백 부분
    - 모델 1, 모델 2에서는 4 셀분의 공백 필요
    - Micro QR 코드에서는 2 셀분의 공백 필요  
  - 파인더(위치 검출 패턴)
    - QR 코드 안에 3개의 '위치 검출 패턴' 들어있음
    - A, B, C 어느 방향에서도 백색과 흑색 셀의 비율이 반드시 1:1:3:1:1이 됨
    - 따라서 360도 모든 방향에서 고속 인식과 판독 가능  
  - 얼라이언트 패턴
    - 위치 검출 패턴보다 작은 크기
    - 시야각에 따른 왜곡을 보정하기 위해 사용(Perspective transformation)
    - 모델 2에 적용  
  - 타이밍 패턴
    - 백색과 흑색 셀이 교대로 배치되어 심벌 내의 셀 좌표를 결정하는데 사용  
 
- QR 코드 만들기
  - 네이버에서 제공하는 서비스 이용
    - https://qr.naver.com/
  
  - 코드 제목 넣기 & 스타일 선택
  - 정보 입력(문자열, URI, ...)
  - QR 코드 생성과 저장
  - QR 코드 스캔
  
### QR 코드 응용 프로그램 만들기
- QR 코드 인식을 위한 소프트웨어
  - Zbar Bar Code Reader 프로그램
    - http://zbar.sourceforge.net/
    - 오픈소스 프로젝트
  
- Zbar 파이썬 라이브러리
  - QR 코드 인식을 지원하는 파이썬 라이브러리
    - https://pypi.org/project/pyzbar/
  
- ZBar 파이썬 라이브러리 설치하기
  - ZBar 파이썬 라이브러리 pyzbar 패키지 설치
    - $ pip install pyzbar
  
- QR 코드 만들기
  - QR 코드를 자동 생성해주는 웹사이트에 접속
    - http://mqr.kr/generate/text
  
- 이미지에서 QR 코드 인식하기
  - 예제 1) qr_read_img.py
    - QR_code1.png 이미지에서 QR 코드를 인식하는 파이썬 프로그램(테두리에 빨간색으로 그리고 담고 있는 정보 표시)
    - pyzbar.decode() 함수의 리턴값 처리하기  
  - 작업폴더
    - 'qr_code' 폴더와 그 아래 'src' 폴더 만들기
  
- 카메라 영상에서 QR 코드 인식하기
  - 예제 2) qr_read_cam.py
    - OpenCV에서 카메라 영상 가져와서 QR 코드 인식하기
  
- ROI 영역에서 QR 코드 인식하기
  - 예제 3) qr_read_roicam.py
    - 영상의 지정된 영역에서 QR 코드 인식